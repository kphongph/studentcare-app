<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../../bower_components/iron-validatable-behavior/iron-validatable-behavior.html">
<link rel="import" href="../../../bower_components/paper-radio-button/paper-radio-button.html">

<link href="https://fonts.googleapis.com/css?family=Athiti" rel="stylesheet">

<dom-module id="sdq-form-teacher">
  <template>
    <style include="iron-flex iron-flex-alignment iron-flex-factors">
      :host {
        /*@apply --paper-font-body1;*/
        background-color: white;
        display: block;
        width:100%;
      }
      .invalid {
        border:1px solid red;
      }
      .question {
        /*padding:7px;*/
        margin-top:2px;
        margin-left: 5px;
        /*background-color:var(--paper-grey-100);*/
        font-family: 'Athiti', sans-serif;
        background-color: white;
        /*font-size: 110%;*/
      }

      paper-radio-button{
        font-family: 'Athiti', sans-serif;
      }
    </style>
     <div class="layout vertical font-face">
      <div id="r_exist">
        <div class="question">1. โดยรวมคุณคิดว่าเด็กมีปัญหาในด้านอารมณ์ ด้านสมาธิ ด้านพฤติกรรม  หรือความสามารถเข้ากับผู้อื่นหรือไม่</div>
          <paper-radio-group selected="{{value.exist}}">
            <paper-radio-button name="n">ไม่</paper-radio-button>
            <paper-radio-button name="y">ใช่</paper-radio-button>
          </paper-radio-group>
      </div>

      <template is="dom-if" if="{{_isEquals(value.exist,'y')}}">
        <!--<div id="problemExist" class="layout vertical" hidden>-->
        <div class="layout vertical">
         <div id="r_level">
          <div class="question">2. เด็กมีปัญหาดังกล่าวในระดับ</div>
            <paper-radio-group selected="{{value.level}}">
              <paper-radio-button name="0">เล็กน้อย</paper-radio-button>
              <paper-radio-button name="1">ชัดเจน</paper-radio-button>
              <paper-radio-button name="2">อย่างรุนแรง</paper-radio-button>
            </paper-radio-group>
         </div>
         <div id="r_time">
          <div class="question">3. ปัญหานี้เกิดขึ้นมานามเท่าไหร่แล้ว</div>
            <paper-radio-group selected="{{value.time}}">
               <paper-radio-button name="1m">น้อยกว่า 1 เดือน</paper-radio-button>
               <paper-radio-button name="1m-5m">1 - 5 เดือน</paper-radio-button>
               <paper-radio-button name="6m-1y">6 - 12 เดือน</paper-radio-button>
               <paper-radio-button name="1y">มากกว่า 1 ปี</paper-radio-button>
            </paper-radio-group>
         </div>
         <div id="r_unhappy">
          <div class="question">4. ปัญหานี้ทำให้เด็กรู้สึกไม่สบายใจหรือไม่</div>
            <paper-radio-group selected="{{value.unhappy}}">
               <paper-radio-button name="0">ไม่เลย</paper-radio-button>
               <paper-radio-button name="1">เล็กน้อย</paper-radio-button>
               <paper-radio-button name="2">ค่อนข้างมาก</paper-radio-button>
               <paper-radio-button name="3">มาก</paper-radio-button>
            </paper-radio-group>
         </div>
         <div id="r_friend">
          <div class="question">5. ปัญหานี้รบกวนชีวิตประจำวันของเด็กในด้านการคบเพื่อนหรือไม่</div>
            <paper-radio-group selected="{{value.friend}}">
               <paper-radio-button name="0">ไม่เลย</paper-radio-button>
               <paper-radio-button name="1">เล็กน้อย</paper-radio-button>
               <paper-radio-button name="2">ค่อนข้างมาก</paper-radio-button>
               <paper-radio-button name="3">มาก</paper-radio-button>
            </paper-radio-group>
         </div>
         <div id="r_study">
          <div class="question">6.  ปัญหานี้รบกวนชีวิตประจำวันของเด็กในด้านการเรียนในห้องเรียนหรือไม่</div>
            <paper-radio-group selected="{{value.study}}">
               <paper-radio-button name="0">ไม่เลย</paper-radio-button>
               <paper-radio-button name="1">เล็กน้อย</paper-radio-button>
               <paper-radio-button name="2">ค่อนข้างมาก</paper-radio-button>
               <paper-radio-button name="3">มาก</paper-radio-button>
            </paper-radio-group>
         </div>
         <div id="r_social">
          <div class="question">7. ปัญหาของเด็กทำให้คุณหรือชั้นเรียนเกิดความยุ่งยากหรือไม่</div>
            <paper-radio-group selected="{{value.social}}">
               <paper-radio-button name="0">ไม่เลย</paper-radio-button>
               <paper-radio-button name="1">เล็กน้อย</paper-radio-button>
               <paper-radio-button name="2">ค่อนข้างมาก</paper-radio-button>
               <paper-radio-button name="3">มาก</paper-radio-button>
            </paper-radio-group>
         </div>
        </div>
      </template>
  </template>

  <script>
    Polymer({
      is: 'sdq-form-teacher',
      properties: {
        value:{
          type:Object,
          notify:true,
          value:function() {
            return {};
          }
        }
      },
      behaviors:[
        Polymer.IronValidatableBehavior
      ],
      observers: [
        '_existChanged(value.exist)',
      ],
      _existChanged: function(exist) {
        //console.log(exist);
        if(exist){
          var dict = {
            'y': true,
            'n': false
          };
          //console.log(!dict[exist]);
          //document.getElementById("problemExist").hidden = !dict[exist];
          //this.$.problemExist.hidden = !dict[exist];
        }
      },
      _isEquals:function(a,b) {
        return a != null && a == b ;
      },
      _getValidity: function() {
        var obj = this.value;
        var self = this;
        var __check = function(attr) {
          if(!obj[attr]) {
            self.$['r_'+attr].classList.add('invalid');
            return false;
          } else {
            self.$['r_'+attr].classList.remove('invalid');
          }
          return true;
        }

        if(!obj.exist) {
          this.$.r_exist.classList.add('invalid');
          return false;
        } else {
          this.$.r_exist.classList.remove('invalid');
          if(obj.exist == 'Y') {
            var attrs = ['level','time',
              'unhappy','friend','study','social'];
            for(var i=0;i<attrs.length;i++) {
              if(!__check(attrs[i])) {
                return false;
              }
            }
          }
        }
        return true;
      }
    });
  </script>
</dom-module>
